<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Photo Management</title>
<link th:href="@{/vendor/fontawesome/css/all.min.css}" rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
	rel="stylesheet">
<link rel="stylesheet"
	th:href="@{/vendor/bootstrap/dist/css/bootstrap.min.css}">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.6/animate.min.css">
<link rel="stylesheet" th:href="@{/css/base.css}">
<link rel="stylesheet" th:href="@{/css/login.css}">
<link rel="stylesheet" th:href="@{/css/admin.css}">

</head>

<body id="page-top">

	<div id="wrapper">
		<div class="container">
			<div id="content-wrapper" class="d-flex flex-column">
				<div id="content">
					<nav
						class="navbar navbar-expand navbar-light bg-white topbar mb-2 static-top shadow">
						<div class="d-sm-flex align-items-center justify-content-between">
							<a href="listImages"> <img src="images/logo.png" alt=""
								class="img-logo"></a> <a href="listImages"
								class="web-title mb-0 "> Photo Management </a>
						</div>
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav mr-auto">
								<li class="nav-item active"><a class="nav-link" href="home">Home
										<span class="sr-only">(current)</span>
								</a></li>
								<li class="nav-item active"><a class="nav-link"
									href="category">Category</a></li>
							</ul>
						</div>
						<button id="sidebarToggleTop"
							class="btn btn-link d-md-none rounded-circle mr-3">
							<i class="fa fa-bars"></i>
						</button>
						<ul class="navbar-nav ">
							<li class="nav-item dropdown no-arrow d-sm-none"><a
								class="nav-link dropdown-toggle" href="#" id="searchDropdown"
								role="button" data-toggle="dropdown" aria-haspopup="true"
								aria-expanded="false"> <i class="fas fa-search fa-fw"></i>
							</a>
								<div class="topbar-divider d-none d-sm-block"></div>
							<li class="nav-item dropdown no-arrow">
								<div
									class="dropdown-toggle not-link" id="userDropdown"
									role="button" data-toggle="dropdown" aria-haspopup="true"
									aria-expanded="false">
									<span class="mr-2 d-none d-lg-inline text-gray-600 small"
										th:text="Hi + ' ' + ${user.lastName}+ ' ' +${user.Name}">
									</span>
									 <img class="img-profile rounded-circle" th:src="${(user.image != null) ? 'data:image/jpeg;base64,'+{user.image} : '/images/avt/default.png'}">
								</div>
								<div class="dropdown-menu" aria-labelledby="userDropdown">
									<a class="dropdown-item" href="/userInfo">Thông tin tài khoản</a> <a
										class="dropdown-item" href="/login">Đăng xuất</a>
								</div>
							</li>
						</ul>
					</nav>

					<div class="container-fluid generalClass">
						<div id="btn-upload" class="btn btn-primary upload">Upload
							Image</div>
						<!-- modal add image -->
						<div class="modal" id="modal__layout">
							<div class="modal__overlay"></div>
							<div class="modal__body" >
								<button id="btn-close">x</button>
								<h3 class="add-image" style="width: 100px;
								margin: 12px auto;">Add Image</h3>
								<div class="form-login">
									<form class="border border-light p-4 upload-form" action="addI"
									method="POST" enctype="multipart/form-data">

									<h4 class="text-black-50  text-left">Title</h4>
									<input type="text" name="title" id="title"
										class="form-control mb-4" placeholder="Logo Google" required>
									<h4 class="text-black-50  text-left">
										<label class="required" >*
												(Enter keywords related to your image)
										</label>
									</h4>
									<input type="text" name="nameDescription" id=""
									class="form-control mb-4" placeholder="" required>
									<h4 class="text-black-50  text-left">Category</h4>
									<select name="category" class="form-control mb-4" >
										<option th:each="cate : ${cate}" th:value="*{cate.name}">[[*{cate.name}]]</option>
									</select>
									<div class="custom-file mb-4 dispaly-block">
										<label style =" display: block;" class="text-black-50">*
												(.png, .jpg, .jpeg, .gif)</label>
										<label for="customFile" class="label-choose-image" style="display: block;">
											Choose image <i class="far fa-file-image"></i>
										</label>
										<input type="file"accept=".png, .jpg, .jpeg, .gif" name="file"
											class="custom-file-input" id="customFile">
									</div>
								</br>
									<button class="btn btn-info" type="submit"> Add to Library
										<i class="fas fa-plus-circle btn-add-icon"></i>
									</button>
									
								</form>
								</div>
							
							</div>
						</div>
						<div class="modal" id="modal__layout-addCategory">
							<div class="modal__overlay"></div>
							<div class="modal__body">
								<button id="btn-close-cate">x</button>
								<form class="text-center border border-light p-5"
									action="addCate" method="POST" enctype="multipart/form-data">
									<h4 class="text-black-50  text-left">Category Name:</h4>

									<input type="text" name="name" id="addcategory"
										class="form-control mb-4" placeholder="natural" required>
									
									<div class="custom-file mb-4">
										<input type="file" name="file" class="custom-file-input"
											id="customFileCategory"> <label
											class="custom-file-label" for="customFileCategory" required>Chose
											Image</label>
									</div>

									<button class="btn btn-info btn-block" type="submit">Add</button>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<div class="table-responsive">
						<button id="btn-delete" class="btn-delete" disabled>Delete</button>
						<label>Select Categogy</label>
						<select name="category" id="category" class="form-control mb-4" style="width: 202px;
						display: inline-flex;">
						     <!-- <option value="" selected disabled hidden>Choose here</option> -->
							<option th:each="cate : ${cate}" th:value="*{cate.name}">[[*{cate.name}]]</option>
						</select>

						<input type="text" id="myInput" class="form-control mb-4" style="width: 202px;
						display: inline-flex;" onkeyup="myFunction()" placeholder="Filter for names..">
						<table id="mytable" class="table table-bordred table-striped">
							<div th:if="${images.empty}" class="not-images">
								<img src="images/unnamed.png" alt="" class="img-not-found">
								<p class="">Kho ảnh của bạn đang trống !</p>
								<div id="upload-2" class="btn btn-primary btn-upload-2">Thêm
									ảnh</div>
							</div>

							<thead th:unless="${images.empty}">
								<th><input type="checkbox" id="checkAllItem"></th>
								<th>Image</th>
								<th>Title</th>
								<th>Categogy</th>
								<th>Published On</th>
								<th class="th-btn">Edit</th>
								<th class="th-btn">Delete</th>
							<tbody>
								<tr th:each="image : ${images}">
									<td><input type="checkbox" id="checkitem" name="">
									</td>
									<th scope="row"><img alt=""
										th:src="*{'data:image/jpeg;base64,'+{image.image}}"
										style="width: 100px; height: 100px;"></th>
									<td>[[*{image.title}]]</td>
									<td>[[*{image.category}]]</td>
									<td>[[*{image.datetime}]]</td>
									<!-- th:href="@{/image/edit/{id}(id=${image.id})}" -->
									<td>
										<!-- <button id="btn-edit--image"
										class="btn btn-edit mt-4">Edit</button>
										<div class="modal" id="modal__layout-editCategory">
											<div class="modal__overlay"></div>
											<div class="modal__body">
												<button id="btn-close-cate">x</button>
												<form class="text-center border border-light p-5"
												th:action="@{/updateImage/{id}(id=${image.id})}" method="POST" th:object="${image}" enctype="multipart/form-data">
				
													<h4 class="text-black-50  text-left">Title:</h4>
													<input type="text"  th:field="*{title}"
														class="form-control mb-4" required>
	
													<h4 class="text-black-50  text-left">Category:</h4>
													<input type="text"   th:field="*{category}"
														class="form-control mb-4" required>
													<h4 class="text-black-50  text-left">Date:</h4>
													<input type="text"   th:field="*{datetime}"
														class="form-control mb-4" required>
			
													<button class="btn btn-info btn-block" type="submit">Update</button>
												</form>
											</div>
										</div> -->
									</td>
									
									<td>
										
										<a data-toggle="modal" data-target="#modal-warning"  th:attr="data-target='#modal-warning'+${image.id}"
										class="btn btn-danger mt-4">Delete</a>
										
										<div class="modal modal-warning fade" th:id="modal-warning+${image.id}" >
											<div class="modal-dialog">
												<div class="modal-content">
													<div class="modal-header">
														<button type="button" class="close" data-dismiss="modal" aria-label="Close" style="font-size: 25px;">
															X</button>
													</div>
													<div class="modal-body" id="modal-body">
														Are you sure want to delete this image?
													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-outline pull-left" data-dismiss="modal">Close</button>
														<a type="button" class="btn btn-outline pull-right btn-yes" th:href="@{/deleteImg/{id}(id=${image.id})}"><i class="fas fa-check-circle"></i>&nbsp;Yes</a>
													</div>
												</div>
											</div>
										</div>
									</td>
									
								</tr>
								
							</tbody>
							</thead>

						</table>
					</div>
				</div>
			</div>

		</div>
		<footer class="bg-white footer">
			<div class="container my-auto">
				<div class="copyright text-center my-auto">
					<span>Copyright &copy; Hoai Mi and Bao Van</span>
				</div>
			</div>
		</footer>
	</div>


	<script src="vendor/jquery/jquery.slim.min.js"></script>
	<script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>
	<script>
		var table = document.getElementById("mytable");
		var tr = table.getElementsByTagName("tr");
		function myFunction() {
		var input, filter, td, i, txtValue;
		input = document.getElementById("myInput");
		filter = input.value.toUpperCase();
		for (i = 0; i < tr.length; i++) {
			td = tr[i].getElementsByTagName("td")[1];
			if (td) {
				txtValue = td.textContent || td.innerText;
				if (txtValue.toUpperCase().indexOf(filter) > -1) {
				tr[i].style.display = "";
				} else {
				tr[i].style.display = "none";
				}
			}
		}
	}

	
	</script>
	<script>  
		$(document).ready(function(){
			 alert('hi');
		console.log("hihi");
		});
	</script>
	<script src="vendor/js/main.js"></script>
	
</body>

</html>